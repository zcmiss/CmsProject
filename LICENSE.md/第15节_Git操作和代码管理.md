## Git操作和代码管理
##### @author：Davie
##### 版权所有：北京千锋互联科技有限公司

在实际的项目开发过程中，多人进行项目开发，需要涉及到代码管理和协同管理。这就需要使用到代码协同管理工具。在过去，大家都熟悉使用的是SVN软件，而现在Git代码仓库管理软件的使用更为广泛。在本系列实战项目中，我们模仿实际项目的开发流程，对已经完成的项目代码使用git软件进行管理，以记录我们每次提交的内容和项目开发过程。
### Git账户注册和Git仓库创建
###### Git简介
Git是一款免费、开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目。Git 是Linux系统之父Torvalds为了帮助管理 Linux 内核开发而开发的一个开放源码的版本控制软件。
###### Git功能及特点
现在，无论大小团队或者公司大型项目管理团队，开发人员熟练掌握git操作，进行代码管理已经成为了一种必要掌握的知识和技能。git的功能和特点有以下所列选项：
* 从服务器上克隆数据库（包括代码和版本信息）到单机上。
* 在自己的机器上创建分支，修改代码。
* 在单机上自己创建的分支上提交代码。
* 在单机上合并分支。
* 新建一个分支，把服务器上最新版的代码fetch下来，然后跟自己的主分支合并。
* 生成补丁（patch），把补丁发送给主开发者。
* 看主开发者的反馈，如果主开发者发现两个一般开发者之间有冲突（他们之间可以合作解决的冲突），就会要求他们先解决冲突，然后再由其中一个人提交。如果主开发者可以自己解决，或者没有冲突，就通过。
* 一般开发者之间解决冲突的方法，开发者之间可以使用pull 命令解决冲突，解决完冲突之后再向主开发者提交补丁。
之所以git能够在程序员界受到欢迎，与其操作简单方便灵活，适合分布式开发的优点密不可分，同时，还支持离线工作，任意的开发人员之间都很容易解决冲突。这些明显的优点使得Git在程序员群体中快速被学习和扩散。
###### Github账户注册
GitHub是一个面向开源及私有软件项目的托管平台，因为只支持Git作为唯一的版本库格式进行托管，故名GitHub。Github可以为开发者提供项目代码托管服务，目前已经是最大的开源软件平台之一。2018年6月，微软收购了Github。
本系列课程内容，我们将使用github作为我们项目代码的托管平台。因此，首先，我们需要注册github账号。
Github地址：[https://github.com/](https://github.com/)
![github_index](15546862223585/github_index.png)
如上图，填写用户名，密码，确认密码后即可进行注册。已经有账号的同学可以直接登录：[https://github.com/login](https://github.com/login)
![github_login](15546862223585/github_login.png)

### Git账户配置
由于本地Git仓库和GitHub仓库之间的传输是通过SSH加密的，所以必须要让github仓库认证你SSH key，在此之前，必须要生成SSH key。
* 1、在本地电脑环境中创建SSH Key。生成SSH Key可以通过ssh命令进行生成，生成命令如下：
    
    ```
    ssh-keygen -t rsa -C "youremail@example.com"
    ```
    输入上述命令后按回车，要求输入一个密语字符串，可以直接回车表示没有密语，接着会让输入2次口令，同样回车按键。最终会执行完毕，执行完毕后，应该在本地机器可以找到两个文件，分别是id_rsa、id_rsa.pub文件。windows系统下两个文件的位置在[c盘>用户>自己的用户名>.ssh]目录下已经生成好了；macOS系统下面，在系统用户目录下有.ssh目录中，也有id_ras和id_rsa.pub两个文件。这里仅列出macOS目录下的文件截图：
![github_setting](15546862223585/github_setting.png)

* 2、打开已经登录的github，打开setting -> SSH Keys,点击右上角New SSH Key,把第一步生成的两个文件中的其中一个id_rsa.pub内容放入到输入框中，并为该ssh key命名。
![github_newssh](15546862223585/github_newssh.png)
![github_sshinput](15546862223585/github_sshinput.png)
配置成功，会在SSH Keys列表中展示出来。
    
### 创建仓库
可以通过创建新的仓库来进行代码仓库的创建，方便我们后续使用该仓库来进行代码管理。如下图：
![github_ne](15546862223585/github_new.png)
然后填写仓库名称，描述，是否是私有等选项内容，最后点击创建。
![github_newdescription](15546862223585/github_newdescription.png)
接下来，我们就可以通过命令来进行仓库代码的操作。
### Git命令使用进行代码管理
#### 本地项目端的操作
* 创建项目仓库
进入到项目根目录，使用**git init**命令来初始化该项目，使整个项目变为一个git管理的项目。

    ```
    git init
    ```

* 本地提交项目代码
之前我们搭建项目架构、进行项目配置，并开发完成的管理员登陆功能，代码开发已经进入正轨。因此，我们有必要每开发完成一个小功能，就提交一次我们的代码，以达到能够实时跟踪并保存我们的项目代码的目的。在git中，将已经开发完成的代码提交到仓库需要两个步骤：第一个步骤是将代码提交到本地，第二步是推送到远端仓库，在我们这个系列课程中的远端仓库就是我们在github上已经创建的仓库。
首先，我们来看第一步，将代码提交到本地。这一步骤需要使用commit命令，具体命令如下：

    ```
    git add .
    git commit -m "本次提交的文字说明，如添加了哪些功能代码，修改了哪些代码等"
    ```
如上命令所示，首先通过add命令指定要提交哪些文件,"."表示提交所有变更的文件；commit有一个-m参数供开发者添加代码提交的说明。
* 查看本地git状态
在本地git项目目录下，可以通过status命令来查看当前项目文件的状态。
```
git status
```
![git_status](15546862223585/git_status.png)
红色表示自上次提交以后，有过内容修改的文件。该命令在我们开发过程中使用非常频繁。

#### 添加远端仓库
按照上述操作，我们已经完成了本地的git项目操作，接下来就是将代码推送到远端github仓库的操作步骤。
* 首次推送添加远端仓库分支
当我们推送代码到远端仓库时，我们需要进行知道远端仓库的分支地址，首次推送前，我们首先需要进行远端分支添加。添加远端分支的命令如下：

    ```
    git remote add origin https://github.com/yuxinburen/qianfengCmsProject.git
    ```
该远端分支添加绑定操作，只需要操作一次即可。

* 执行推送命令
在远端分支绑定完成以后，我们就可以使用push命令将仓库代码推送到远端，具体命令如下：
```
git push -u origin master
```
![git_push](15546862223585/git_push.png)

* github查看仓库推送代码
推送结束后，可以在github中创建的仓库中看到我们推送成功的代码，如下图所示：
![github_pushdone](15546862223585/github_pushdone.png)

本节内容，我们带大家学习了如何将自己开发的代码进行仓库管理，提交推送等的命令操作。在实际开发过程中，都是最基础的技能，大家务必要掌握。
